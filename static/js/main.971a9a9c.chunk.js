(this["webpackJsonpcovid-tracker"]=this["webpackJsonpcovid-tracker"]||[]).push([[0],{181:function(e,t,a){},203:function(e,t){e.exports={GoogleAnalyticsTag:"UA-183443755-2",officialAPI:"https://api.covid19api.com/summary",officialAPICountry:"https://api.covid19api.com/country/",backupServerCountriesURL:"https://covid19trackerbackend.herokuapp.com/countries",backupServerURL:"https://covid19trackerbackend.herokuapp.com/"}},206:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a(1),r=a.n(n),o=a(8),s=a.n(o),i=(a(67),a(18)),u=a.n(i),l=a(19),h=a(12),d=a(40),b=a(4),p=(a(69),a(61)),j=a(41),m=a.n(j),f=a(5),v=(a(44),a(27)),g=function(e){var t=e.country,a=e.title,r=e.firstLabel,o=e.secondLabel,s=e.graphData,i=e.dotRadius,u=Object(n.useState)({}),l=Object(b.a)(u,2),h=l[0],d=l[1];return Object(n.useEffect)((function(){d({labels:s.map((function(e){return e.newDate.date})),datasets:[{label:r,data:s.map((function(e){return e.confirmed})),backgroundColor:"rgba(1,1,1,0)",borderWidth:2,borderColor:"red",radius:i},{label:o,data:s.map((function(e){return e.recovered})),backgroundColor:"rgba(1,1,1,0)",borderWidth:2,borderColor:"turquoise",radius:i}]})}),[s]),Object(c.jsxs)("div",{className:"chart",children:[Object(c.jsx)("h2",{className:"country-name",children:t}),Object(c.jsx)("h2",{className:"country-title",children:a}),Object(c.jsx)(v.Line,{data:h,height:null,width:null,options:{aspectRatio:1.15,resposive:!0,legend:{labels:{fontSize:15,fontColor:"black"}}}})]})},O=(a(181),a(182),a(60)),y=a.n(O);var x=function(e){var t=e.text;return Object(c.jsx)("div",{className:"loadingWrapper",children:Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsx)(y.a,{type:"Oval",color:"black",height:70,width:70}),t]})})},k=function(e){var t=e.country,a=e.title,r=e.type,o=e.graphData,s=e.dotRadius,i=e.label,u=e.color,l=Object(n.useState)({}),h=Object(b.a)(l,2),d=h[0],p=h[1];return Object(n.useEffect)((function(){p({labels:o.map((function(e){return e.newDate.date})),datasets:[{label:i,data:o.map((function(e){return"Active"===r?e.active:e.deaths})),backgroundColor:"rgba(1,1,1,0)",borderWidth:2,borderColor:u,radius:s}]})}),[o]),Object(c.jsxs)("div",{className:"chart",children:[Object(c.jsx)("h2",{className:"country-name",children:t}),Object(c.jsx)("h2",{className:"country-title",children:a}),Object(c.jsx)(v.Line,{data:d,height:null,width:null,options:{aspectRatio:1.15,resposive:!0,legend:{labels:{fontSize:15,fontColor:"black"}}}})]})},D=a(202),w=function(e){return new Promise((function(t,a){setTimeout((function(){return a("Error!")}),1e4),D(e).then((function(e){return e.json()})).then((function(e){var a=(e=e.Countries).map((function(e){return{name:e.Country,slug:e.Slug}}));t(Object(h.a)(a))})).catch((function(e){a(e)}))}))},N=function(e,t){return new Promise((function(a,c){setTimeout((function(){return c("Error!")}),5e3),D("".concat(e).concat(t)).then((function(e){return e.json()})).then((function(e){a(Object(h.a)(e))})).catch((function(e){c(e)}))}))},C=function(e){var t=[],a=[];return e.forEach((function(e){var c=e.slice(8,e.length),n=e.slice(5,7),r=e.slice(0,4);switch(a[a.length-1]!==r&&a.push(r),n){case"01":t.push({month:"January",monthNum:"01",year:r,day:c,date:"".concat(c," Jan ").concat(r)});break;case"02":t.push({month:"February",monthNum:"02",year:r,day:c,date:"".concat(c," Feb ").concat(r)});break;case"03":t.push({month:"March",monthNum:"03",year:r,day:c,date:"".concat(c," March ").concat(r)});break;case"04":t.push({month:"April",monthNum:"04",year:r,day:c,date:"".concat(c," April ").concat(r)});break;case"05":t.push({month:"May",monthNum:"05",year:r,day:c,date:"".concat(c," May ").concat(r)});break;case"06":t.push({month:"June",monthNum:"06",year:r,day:c,date:"".concat(c," June ").concat(r)});break;case"07":t.push({month:"July",monthNum:"07",year:r,day:c,date:"".concat(c," July ").concat(r)});break;case"08":t.push({month:"August",monthNum:"08",year:r,day:c,date:"".concat(c," Aug ").concat(r)});break;case"09":t.push({month:"September",monthNum:"09",year:r,day:c,date:"".concat(c," Sept ").concat(r)});break;case"10":t.push({month:"October",monthNum:"10",year:r,day:c,date:"".concat(c," Oct ").concat(r)});break;case"11":t.push({month:"November",monthNum:"11",year:r,day:c,date:"".concat(c," Nov ").concat(r)});break;case"12":t.push({month:"December",monthNum:"12",year:r,day:c,date:"".concat(c," Dec ").concat(r)})}})),t},S=function(e,t,a,c,n){null===e?e=a:null===t&&(t=c);var r=e.getDate(),o=e.getMonth()+1,s=e.getFullYear(),i=t.getDate(),u=t.getMonth()+1,l=t.getFullYear(),h=[];return s<l?n.forEach((function(e){var t=parseInt(e.newDate.day),a=parseInt(e.newDate.monthNum),c=parseInt(e.newDate.year);c===s?a===o?t>=r&&h.push(e):a>=o&&h.push(e):c>=s&&c<l?h.push(e):c===l&&(a===u?t<=i&&h.push(e):a<=u&&h.push(e))})):n.forEach((function(e){var t=parseInt(e.newDate.day),a=parseInt(e.newDate.monthNum);parseInt(e.newDate.year)===l&&a>=o&&a<=u&&(o!==u?a===o?t>=r&&h.push(e):a===u?t<=i&&h.push(e):h.push(e):t>=r&&t<=i&&h.push(e))})),h},A=a(203),I=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),s=Object(b.a)(o,2),i=s[0],j=s[1],v=Object(n.useState)([]),O=Object(b.a)(v,2),y=O[0],D=O[1],I=Object(n.useState)([]),T=Object(b.a)(I,2),P=T[0],L=T[1],R=Object(n.useState)(!0),U=Object(b.a)(R,2),E=U[0],F=U[1],M=Object(n.useState)(),J=Object(b.a)(M,2),z=J[0],B=J[1],V=Object(n.useState)(),W=Object(b.a)(V,2),_=W[0],G=W[1],Y=Object(n.useState)(null),Z=Object(b.a)(Y,2),q=Z[0],H=Z[1],K=Object(n.useState)(null),Q=Object(b.a)(K,2),X=Q[0],$=Q[1],ee=Object(n.useState)(new Date),te=Object(b.a)(ee,2),ae=te[0],ce=te[1],ne=Object(n.useState)(new Date),re=Object(b.a)(ne,2),oe=re[0],se=re[1],ie=Object(n.useState)(!1),ue=Object(b.a)(ie,2),le=ue[0],he=ue[1],de=Object(n.useState)(!1),be=Object(b.a)(de,2),pe=be[0],je=be[1],me=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,c,n,o,s,i,d,b,p,m,v,g;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),f.a.event({category:"User",action:"Changed country to ".concat(t.value)}),e.prev=2,e.next=5,N(A.officialAPICountry,t.value);case 5:a=e.sent,he(!1),e.next=26;break;case 9:return e.prev=9,e.t0=e.catch(2),e.prev=11,e.next=14,N(A.backupServerURL,t.value);case 14:a=e.sent,he(!0),e.next=25;break;case 18:return e.prev=18,e.t1=e.catch(11),f.a.event({category:"User",action:"Fetching per country backup failed"}),je(!0),r(!1),F(!1),e.abrupt("return");case 25:f.a.event({category:"User",action:"Fetching per country API failed"});case 26:c=a.map((function(e){return{name:e.Country,confirmed:e.Confirmed,recovered:e.Recovered,active:e.Active,deaths:e.Deaths,date:e.Date.slice(0,10),province:e.Province}})),0==(n=c.filter((function(e){return""===e.province}))).length?(o=c[0].date,s=[],c.forEach((function(e){e.date==o?s.push(e):(o=e.date,n.push(Object(h.a)(s)),s=[])})),i=[],console.log(n),n.forEach((function(e){var t={confirmed:0,recovered:0,active:0,deaths:0};e.forEach((function(e){t=Object(l.a)(Object(l.a)({},e),{},{confirmed:t.confirmed+e.confirmed,recovered:t.recovered+e.confirmed,active:t.active+e.active,deaths:t.deaths+e.deaths})})),i.push(t),t={}})),c=[].concat(i)):c=Object(h.a)(n),d=c.map((function(e){return e.date})),b=C(d),p=0,c=c.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{newDate:b[p++]})})),m=c[0],v=c[c.length-1],B(new Date("".concat(m.newDate.year,"-").concat(m.newDate.monthNum,"-").concat(m.newDate.day))),G(new Date("".concat(v.newDate.year,"-").concat(v.newDate.monthNum,"-").concat(v.newDate.day))),g=c.slice(c.length-30,c.length),j(c),D(g),fe(g),r(!0),F(!1),document.getElementsByClassName("about-wrapper")[0].style.marginTop="20px";case 44:case"end":return e.stop()}}),e,null,[[2,9],[11,18]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){var t=new Date(e[0].date),a=new Date(e[e.length-1].date),c=new Date(e[0].date);ce(c),t.setDate(t.getDate()+1),a.setDate(a.getDate()-1),H(t),$(a)};return Object(n.useEffect)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.a.initialize(A.GoogleAnalyticsTag),f.a.pageview("/"),e.prev=2,e.next=5,w(A.officialAPI);case 5:t=e.sent,he(!1),e.next=26;break;case 9:return e.prev=9,e.t0=e.catch(2),e.prev=11,e.next=14,w(A.backupServerCountriesURL);case 14:t=e.sent,he(!0),e.next=25;break;case 18:return e.prev=18,e.t1=e.catch(11),f.a.event({category:"User",action:"Fetching countries backup server failed"}),je(!0),r(!1),F(!1),e.abrupt("return");case 25:f.a.event({category:"User",action:"Fetching countries API failed"});case 26:t=t.filter((function(e){return"united-states"!=e.slug})),L(t),me({value:"pakistan"});case 29:case"end":return e.stop()}}),e,null,[[2,9],[11,18]])}))),[]),Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)("div",{id:"first-section",children:[Object(c.jsx)("h1",{className:"heading",children:"COVID-19 Tracker"}),Object(c.jsx)("h3",{id:"tagline",children:"Stay Home & Stay Safe"}),Object(c.jsx)("hr",{style:{width:"95%"}}),Object(c.jsxs)("div",{className:"selectors",children:[Object(c.jsxs)("div",{className:"select-container",children:[Object(c.jsx)("h3",{children:"Select Country / Region"}),Object(c.jsx)(p.a,{options:P.map((function(e){return{value:e.slug,label:e.name}})),defaultValue:{value:"pakistan",label:"Pakistan"},onChange:me})]}),Object(c.jsxs)("div",{className:"date-picker-wrapper",children:[Object(c.jsxs)("div",{className:"date-picker",children:[Object(c.jsx)("h3",{children:"From"}),Object(c.jsx)(m.a,{format:"dd-MM-y",onChange:function(e){f.a.event({category:"User",action:"Changed starting date to ".concat(e.toLocaleString())}),ce(e);var t=new Date(e.getTime());t.setDate(t.getDate()+1),H(t),D(S(e,null,ae,oe,i))},value:ae,clearIcon:null,minDate:z,maxDate:X,className:"picker"})]}),Object(c.jsxs)("div",{className:"date-picker",children:[Object(c.jsx)("h3",{children:"To"}),Object(c.jsx)(m.a,{format:"dd-MM-y",onChange:function(e){f.a.event({category:"User",action:"Changed ending date to ".concat(e.toLocaleString())});var t=new Date(e.getTime());t.setDate(t.getDate()-1),$(t),se(e),D(S(null,e,ae,oe,i))},value:oe,clearIcon:null,minDate:q,maxDate:_,className:"picker"})]})]})]}),Object(c.jsx)("hr",{style:{width:"95%"}}),le&&Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{className:"warningMessage",children:"Data fetched from the backup server because the official API threw an error"}),Object(c.jsx)("p",{className:"warningMessage",children:"(Latest dates may not be available) "})]}),E&&Object(c.jsx)(x,{className:"charts",text:"Loading..."}),a&&Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)(g,{country:i[0].name,title:"Cases & Recoveries",firstLabel:"Total Cases",secondLabel:"Total Recoveries",graphData:y,dotRadius:0}),Object(c.jsx)(k,{country:i[0].name,title:"Active Cases",type:"Active",label:"Active Cases",graphData:y,color:"orange",dotRadius:0}),Object(c.jsx)(k,{country:i[0].name,title:"Total Deaths",type:"Deaths",label:"Total Deaths",graphData:y,color:"red",dotRadius:0})]}),pe&&Object(c.jsxs)("div",{className:"error-wrapper",children:[Object(c.jsx)("h1",{children:"Error!"}),Object(c.jsxs)("p",{children:["There was an error retrieving the data. Both the official API and backup server seem to be unresponsive.",Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),"Please refresh the page or try again after a few minutes."]})]}),Object(c.jsxs)("div",{className:"about-wrapper",children:[Object(c.jsx)("p",{id:"note",children:"Note: Any irregularities in the graphs are solely caused by data fetched from the API. Countries with separate data for each province have different provinces' numbers added into a single date."}),Object(c.jsx)("h2",{children:"About"}),Object(c.jsxs)("p",{children:["The data used for the graphs in this project is publicly available and was obtained from the COVID 19 API ",Object(c.jsx)("a",{href:"https://covid19api.com",target:"_blank",onClick:function(){return f.a.event({category:"User",action:"Clicked official API's link"})},children:"here"}),". All credits for the data go to the source. Please visit their website and support them if you can.",Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),"The project is open source and you can view the front end code ",Object(c.jsx)("a",{href:"https://github.com/TheZoraiz/React-COVID19-Tracker",target:"_blank",onClick:function(){return f.a.event({category:"User",action:"Clicked frontend link"})},children:"here"})," and the backup server's code ",Object(c.jsx)("a",{href:"https://github.com/TheZoraiz/COVID19-Tracker-Backend",target:"_blank",onClick:function(){return f.a.event({category:"User",action:"Clicked backup server's link"})},children:"here."})]})]})]})})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,208)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),c(e),n(e),r(e),o(e)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(I,{})}),document.getElementById("root")),T()},44:function(e,t,a){},67:function(e,t,a){},69:function(e,t,a){}},[[206,1,2]]]);
//# sourceMappingURL=main.971a9a9c.chunk.js.map